function hamdastCommunication({ clientKey: e, event: a, data: t, promise: n = !1 }) { const i = { hamdast: { clientKey: e, host: window.location.origin, event: a, data: t } }; if (n) return hamdastPostMessagePromise(i); window.parent.postMessage(i, "*") } function hamdastRrwebFireWhenReady() { void 0 !== window?.rrweb?.record ? window.hamdast?.replay?.record && "function" == typeof window.hamdast?.replay?.record && window.hamdast?.replay?.record?.() : setTimeout((() => hamdastRrwebFireWhenReady(window?.rrweb?.record, window.hamdast?.replay?.record)), 100) } !function () { var e = document.getElementsByTagName("head")[0], a = document.createElement("script"); a.async = !0, a.id = "rrweb-hamdast-script", a.src = "https://hamdast.paziresh24.com/static/js/scripts/rrweb-all.min.js", e.appendChild(a) }(); const hamdastPostMessagePromise = e => { const a = Date.now(); return window.parent.postMessage({ hamdast: { ...e.hamdast, hash_id: a } }, "*"), new Promise(((e, t) => { window.addEventListener("message", (function (t) { t.data?.hamdast?.hash_id === a && e(t.data?.hamdast?.data) })), setTimeout((() => { t() }), 3e4) })) }; window.hamdast = { initialize({ clientKey: e }) { window.hamdast.clientKey = e, hamdastCommunication({ clientKey: e, event: "HAMDAST_INITIALIZE" }), hamdastRrwebFireWhenReady() }, clientKey: null, getState: e => hamdastCommunication({ clientKey: window.hamdast.clientKey, promise: !0, event: "HAMDAST_GET_STATE", data: { state: e } }), getSessionToken: () => hamdastCommunication({ clientKey: window.hamdast.clientKey, promise: !0, event: "HAMDAST_GET_SESSION_TOKEN" }), replay: { record() { rrweb.record({ emit(e) { window.hamdast?.replay?.events?.push?.(e) }, sampling: { input: "last", scroll: 150, media: 800 } }), setInterval(window.hamdast?.replay?.save, 1e4) }, save() { hamdastCommunication({ clientKey: window.hamdast.clientKey, event: "HAMDAST_REPLAY_SAVE", data: { events: window.hamdast?.replay?.events } }) }, events: [] }, openLink: ({ url: e }) => window.self !== window.top ? hamdastCommunication({ clientKey: window.hamdast.clientKey, event: "HAMDAST_OPEN_LINK", data: { url: e } }) : location.assign(e) };